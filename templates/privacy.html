<!DOCTYPE html>
<html lang="nl">
<head>
    <!-- Google tag (gtag.js) - Same implementation as on index page -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4XECBEDSBR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      const hasConsent = document.cookie.split(';').some(c => c.trim().startsWith('analytics_consent='));
      if(hasConsent) {
        gtag('config', 'G-4XECBEDSBR');
      } else {
        gtag('config', 'G-4XECBEDSBR', { 'analytics_storage': 'denied' });
      }
    </script>
    
    <!-- Primary Meta Tags -->
    <meta charset="UTF-8">
    <title>{{ translations[lang]['privacy_title'] }}</title>
    <meta name="description" content="{{ translations[lang]['privacy_description'] }}">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Canonical URL - Adding this to tell search engines this is NOT the main page -->
    <link rel="canonical" href="{{ url_for('privacy', _external=True) }}" />
    
    <!-- Structured Data for privacy policy page -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Privacybeleid",
      "description": "Ons privacybeleid beschrijft hoe wij omgaan met uw gegevens bij het gebruik van de Amsterdam Stadsloket Wachttijden service.",
      "isPartOf": {
        "@type": "WebSite",
        "name": "Amsterdam Stadsloket Wachttijden",
        "url": "{{ request.url_root }}"
      }
    }
    </script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <link rel="alternate" hreflang="nl" href="{{ url_for('privacy', _external=True) }}?lang=nl" />
    <link rel="alternate" hreflang="en" href="{{ url_for('privacy', _external=True) }}?lang=en" />
    <link rel="alternate" hreflang="tr" href="{{ url_for('privacy', _external=True) }}?lang=tr" />
    <link rel="alternate" hreflang="ma" href="{{ url_for('privacy', _external=True) }}?lang=ma" />
    <link rel="alternate" hreflang="x-default" href="{{ url_for('privacy', _external=True) }}" />
</head>
<body>
    <div class="language-switcher">
        {% for code, label, flag in supported_languages %}
            <a href="?lang={{ code }}">
                {{ flag }}
            </a>
        {% endfor %}
    </div>
    <header class="hero">
        <div class="hero-content">
            <h1>Privacybeleid</h1>
            <p>Amsterdam Stadsloket Wachttijden</p>
        </div>
    </header>

    <div class="content-container">
        <article class="privacy-policy">
            <h2>Privacybeleid</h2>
            <p class="last-updated">Laatst bijgewerkt: 1 oktober 2023</p>
            
            <section>
                <h3>1. Inleiding</h3>
                <p>Welkom bij het privacybeleid van Amsterdam Stadsloket Wachttijden ("wij", "ons", of "onze").</p>
                <p>Wij respecteren uw privacy en zetten ons in om uw persoonlijke gegevens te beschermen. Dit privacybeleid legt uit hoe wij omgaan met uw gegevens wanneer u onze website bezoekt.</p>
            </section>
            
            <section>
                <h3>2. Welke gegevens wij verzamelen</h3>
                <p>Wij verzamelen geen persoonlijk identificeerbare informatie tijdens uw bezoek aan onze website.</p>
                <p>We gebruiken echter wel Google Analytics om geanonimiseerde gebruiksgegevens te verzamelen:</p>
                <ul>
                    <li>Browsertype en -versie</li>
                    <li>Geanonimiseerde IP-adressen</li>
                    <li>Bezochte pagina's en klikgedrag</li>
                    <li>Tijd en duur van het bezoek</li>
                    <li>Verwijzingsbronnen</li>
                </ul>
            </section>
            
            <section>
                <h3>3. Cookies</h3>
                <p>Wij maken gebruik van functionele cookies die noodzakelijk zijn voor het functioneren van de website. Daarnaast gebruiken we analytische cookies (Google Analytics) om inzicht te krijgen in het gebruik van onze website.</p>
                <p>U kunt ervoor kiezen om cookies te weigeren via onze cookie-banner of door de instellingen van uw browser aan te passen.</p>
            </section>
            
            <section>
                <h3>4. Google Analytics and Advertising</h3>
                <p>This website uses Google Analytics, a web analytics service provided by Google Inc. ("Google"), and Google AdSense, an advertising service provided by Google.</p>
                <p>Google Analytics uses cookies to help analyze how users use the site. Google AdSense uses cookies to serve ads based on a user's prior visits to our website or other websites.</p>
                <p>Google's use of advertising cookies enables it and its partners to serve ads based on your visit to our site and/or other sites on the Internet. You may opt out of personalized advertising by visiting <a href="https://www.google.com/settings/ads" target="_blank">Google Ads Settings</a>.</p>
                <p>We have taken the following measures to protect your privacy:</p>
                <ul>
                    <li>We have implemented Google Consent Mode to respect your cookie preferences</li>
                    <li>We have a data processing agreement with Google</li>
                    <li>We have disabled data sharing with Google</li>
                    <li>We have activated IP anonymization</li>
                    <li>We only process data after obtaining your consent</li>
                </ul>
            </section>
            
            <section>
                <h3>5. Uw rechten</h3>
                <p>Onder de Algemene Verordening Gegevensbescherming (AVG) heeft u verschillende rechten met betrekking tot uw gegevens:</p>
                <ul>
                    <li>Recht op inzage</li>
                    <li>Recht op rectificatie</li>
                    <li>Recht op vergetelheid</li>
                    <li>Recht op beperking van de verwerking</li>
                    <li>Recht op overdraagbaarheid van gegevens</li>
                    <li>Recht van bezwaar</li>
                </ul>
                <p>Aangezien wij geen persoonlijk identificeerbare informatie verzamelen, zijn deze rechten echter beperkt toepasbaar.</p>
            </section>
            
            <section>
                <h3>6. Contact</h3>
                <p>Voor vragen over dit privacybeleid kunt u contact opnemen via:</p>
                <p>E-mail: privacy@twankerkhof.nl</p>
            </section>
        </article>
    </div>

    <footer class="footer">
        <p>Â© 2025 <a href="https://www.twankerkhof.nl" target="_blank">Twan Kerkhof</a> | Real-time waiting information stadsloketten Amsterdam</p>
        <nav class="footer-nav">
            <a href="{{ url_for('index') }}">{{ translations[lang]['nav_home'] }}</a>
            <a href="{{ url_for('privacy') }}">{{ translations[lang]['nav_privacy'] }}</a>
        </nav>
    </footer>

    <!-- Simplified Cookie Consent Banner -->
    <div id="cookie-consent" class="cookie-bento">
        <h3><i class="fas fa-cookie-bite"></i> {{ translations[lang]['cookie_banner_title'] }}</h3>
        <p>{{ translations[lang]['cookie_banner_text'] }}</p>
        
        <!-- Initial buttons - simplified UI -->
        <div id="consent-initial-buttons" class="cookie-buttons">
            <button id="cookie-accept-all" class="cookie-btn accept">{{ translations[lang]['cookie_accept_button'] }}</button>
            <button id="show-more-options" class="cookie-btn options">{{ translations[lang]['cookie_more_options'] }}</button>
        </div>
        
        <!-- Advanced options (hidden by default) -->
        <div id="consent-advanced" class="consent-advanced" style="display: none;">
            <div class="consent-choices">
                <div class="consent-option">
                    <input type="checkbox" id="consent-analytics" name="consent-analytics" checked>
                    <label for="consent-analytics">{{ translations[lang]['cookie_analytics_option'] }}</label>
                    <div class="option-description">{{ translations[lang]['cookie_analytics_description'] }}</div>
                </div>
                <div class="consent-option">
                    <input type="checkbox" id="consent-ads" name="consent-ads" checked>
                    <label for="consent-ads">{{ translations[lang]['cookie_ads_option'] }}</label>
                    <div class="option-description">{{ translations[lang]['cookie_ads_description'] }}</div>
                </div>
            </div>
            
            <div class="cookie-buttons">
                <button id="cookie-customize" class="cookie-btn customize">{{ translations[lang]['cookie_save_choices'] }}</button>
                <button id="cookie-reject-all" class="cookie-btn decline">{{ translations[lang]['cookie_decline_all'] }}</button>
            </div>
        </div>
        
        <a href="{{ url_for('privacy') }}" class="cookie-policy-link">{{ translations[lang]['cookie_more_info'] }}</a>
    </div>

    <script>
        // Cookie consent functionality
        document.addEventListener('DOMContentLoaded', function() {
            const cookieBanner = document.getElementById('cookie-consent');
            const acceptAllBtn = document.getElementById('cookie-accept-all');
            const showMoreOptionsBtn = document.getElementById('show-more-options');
            const consentInitialButtons = document.getElementById('consent-initial-buttons');
            const consentAdvanced = document.getElementById('consent-advanced');
            const customizeBtn = document.getElementById('cookie-customize');
            const rejectAllBtn = document.getElementById('cookie-reject-all');
            const analyticsCheckbox = document.getElementById('consent-analytics');
            const adsCheckbox = document.getElementById('consent-ads');
            
            // Show more options when clicking "More Options" button
            showMoreOptionsBtn.addEventListener('click', function() {
                consentInitialButtons.style.display = 'none';
                consentAdvanced.style.display = 'block';
            });
            
            // Check for existing consent
            function checkConsent() {
                let consentSettings = {};
                const consentCookie = document.cookie.split(';').find(c => c.trim().startsWith('consent_settings='));
                
                if (consentCookie) {
                    try {
                        consentSettings = JSON.parse(decodeURIComponent(consentCookie.split('=')[1]));
                        cookieBanner.style.display = 'none';
                        return true;
                    } catch (e) {
                        console.error('Error parsing consent cookie:', e);
                    }
                }
                return false;
            }
            
            // Save consent choices
            function saveConsent(settings) {
                document.cookie = 'consent_settings=' + encodeURIComponent(JSON.stringify(settings)) + 
                    '; max-age=' + (86400 * 365) + '; path=/; SameSite=Lax';
                    
                gtag('consent', 'update', {
                    'analytics_storage': settings.analytics ? 'granted' : 'denied',
                    'ad_storage': settings.ads ? 'granted' : 'denied',
                });
                
                cookieBanner.style.display = 'none';
            }
            
            if (!checkConsent()) {
                cookieBanner.style.display = 'block';
            }
            
            acceptAllBtn.addEventListener('click', function() {
                saveConsent({ analytics: true, ads: true });
            });
            
            rejectAllBtn.addEventListener('click', function() {
                saveConsent({ analytics: false, ads: false });
            });
            
            customizeBtn.addEventListener('click', function() {
                saveConsent({
                    analytics: analyticsCheckbox.checked,
                    ads: adsCheckbox.checked
                });
            });
        });
    </script>
</body>
</html>
